language: 
  - ruby
  
rvm:
  - 2.2
  
before_install:
# Install Testspace Runner
  - ./testspace_install.sh

script:
  - bundle install
  - bundle exec rake db:migrate
  - bundle exec rake minitest test
  
# Publish Test Results along with Coverage
  - export PATH="${HOME}/testspace:${PATH}"
# Testspace credentials: "credentials@myorg.testspace.com/myproject/myspace
  - testspace config url ${TESTSPACE_USER_TOKEN}:@${TESTSPACE_URL}
  - testspace publish [Tests]test/reports/TEST*.xml{test} coverage/coverage.xml